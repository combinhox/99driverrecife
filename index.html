<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>99DriverRecife - Lives</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    background: transparent !important;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, Helvetica, sans-serif;
}

.container {
    width: 360px;
    height: 200px;
    position: relative;
    overflow: hidden;
}

.card {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255, 212, 0, 0.5);
    backdrop-filter: blur(8px);
    color: #FFFFFF;
    border-radius: 18px;
    padding: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    box-sizing: border-box;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    transform: translateX(100%);
    opacity: 0;
    transition: 
        transform 0.9s cubic-bezier(.65,.05,.36,1),
        opacity 0.6s ease,
        background 0.6s ease;
}

.card.active {
    transform: translateX(0);
    opacity: 1;
    z-index: 2;
}

.card.exit-left {
    transform: translateX(-100%);
    opacity: 0;
    z-index: 1;
}

/* ===== TIPOGRAFIA ===== */

.city {
    font-size: 25px;
    font-weight: bold;
    letter-spacing: 2px;
    margin-bottom: 1px;
}

.weather-icon {
    width: 90px;
    height: 90px;
    margin: 1px 0;
}

.info-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-top: 1px;
    font-size: 42px;
    font-weight: bold;
    text-shadow: 0 0 12px rgba(0,0,0,0.7);
}

.separator {
    opacity: 0.6;
}

.card-title-ad {
    font-size: 35px;
    font-weight: bold;
    opacity: 0.95;
    text-shadow: 0 0 8px rgba(0,0,0,0.6);
}

.gif-ad {
    max-width: 100%;
    max-height: 120px;
}
</style>
</head>

<body>

<div class="container">

    <!-- CARD 1 - CLIMA -->
    <div class="card active" id="card1">
        <div class="city">RECIFE</div>
        <img id="weatherIcon" class="weather-icon" src="" alt="Clima">

        <div class="info-row">
            <span id="temperature">--º</span>
            <span class="separator">|</span>
            <span id="clock">00:00</span>
        </div>
    </div>

    <!-- CARD 2 - ANÚNCIO -->
    <div class="card" id="card3">
        <img id="adGif" class="gif-ad" src="" style="display:none;">
        <div id="adText" class="card-title-ad">
            Anuncie Aqui
        </div>
    </div>

</div>

<script>
const latitude = -8.05;
const longitude = -34.9;
const gifPath = "";

async function getWeather() {
    try {
        const response = await fetch(
            `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`
        );

        const data = await response.json();

        const temp = Math.round(data.current_weather.temperature);
        const weatherCode = data.current_weather.weathercode;
        const isDay = data.current_weather.is_day;

        document.getElementById("temperature").innerText = temp + "º";
        document.getElementById("weatherIcon").src = getAnimatedIcon(weatherCode, isDay);

        // Fundo dinâmico dia/noite
        if (isDay === 0) {
            document.querySelectorAll(".card").forEach(card => {
                card.style.background = "rgba(20, 30, 60, 0.65)";
            });
        } else {
            document.querySelectorAll(".card").forEach(card => {
                card.style.background = "rgba(255, 212, 0, 0.5)";
            });
        }

    } catch (error) {
        console.log("Erro ao buscar clima:", error);
    }
}

function getAnimatedIcon(code, isDay) {

    const base = "https://basmilius.github.io/weather-icons/production/fill/all/";

    if (code === 0) {
        return isDay
            ? base + "clear-day.svg"
            : base + "clear-night.svg";
    }

    if (code <= 3) {
        return isDay
            ? base + "partly-cloudy-day.svg"
            : base + "partly-cloudy-night.svg";
    }

    if (code <= 67) return base + "rain.svg";
    if (code <= 77) return base + "snow.svg";

    return base + "cloudy.svg";
}

function updateClock() {
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    document.getElementById("clock").innerText = `${hours}:${minutes}`;
}

setInterval(updateClock, 1000);
updateClock();
getWeather();
setInterval(getWeather, 600000);

/* ===== CONTROLE DE TEMPO DOS CARDS ===== */

const cards = [
    {el: document.getElementById("card1"), duration: 20000}, // 20 segundos
    {el: document.getElementById("card3"), duration: 10000}  // 10 segundos
];

let current = 0;

function transitionToNextCard() {
    const currentCard = cards[current].el;
    const nextIndex = (current + 1) % cards.length;
    const nextCard = cards[nextIndex].el;

    currentCard.classList.remove("active");
    currentCard.classList.add("exit-left");

    nextCard.classList.add("active");

    setTimeout(() => {
        currentCard.classList.remove("exit-left");
        current = nextIndex;
        setTimeout(transitionToNextCard, cards[current].duration);
    }, 900);
}

setTimeout(transitionToNextCard, cards[0].duration);

if (gifPath) {
    document.getElementById("adGif").src = gifPath;
    document.getElementById("adGif").style.display = "block";
    document.getElementById("adText").style.display = "none";
}
</script>

</body>
</html>
